<!doctype html>

<html lang="{{ request.locale.iso_code }}" dir="{% render 'direction' %}">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, height=device-height, minimum-scale=1.0, maximum-scale=1.0">
    <meta name="theme-color" content="{{ settings.header_background }}">

    <title>{% if page_title == blank %}{{ shop.name }}{% else %}{{ page_title }}{% if current_page != 1 %} &ndash; {{ 'general.page' | t: page: current_page }}{% endif %}{% endif %}</title>

    {%- if page_description -%}
      <meta name="description" content="{{ page_description | escape }}">
    {%- endif -%}

    <link rel="canonical" href="{{ canonical_url }}">

    {%- if settings.favicon -%}
      <link rel="shortcut icon" href="{{ settings.favicon | image_url: width: 96 }}">
      <link rel="apple-touch-icon" href="{{ settings.favicon | image_url: width: 180 }}">
    {%- endif -%}

    {%- comment -%}Few prefetch to increase performance on commonly used third-parties{%- endcomment -%}
    <link rel="preconnect" href="https://cdn.shopify.com">
    <link rel="preconnect" href="https://fonts.shopifycdn.com" crossorigin>
    <link rel="dns-prefetch" href="https://productreviews.shopifycdn.com">

    {%- unless settings.heading_font.system? -%}
      <link rel="preload" href="{{ settings.heading_font | font_url }}" as="font" type="font/woff2" crossorigin>
    {%- endunless -%}

    {%- unless settings.text_font.system? -%}
      <link rel="preload" href="{{ settings.text_font | font_url }}" as="font" type="font/woff2" crossorigin>
    {%- endunless -%}

    {%- render 'social-meta-tags' -%}
    {%- render 'microdata-schema' -%}
    {%- render 'css-variables' -%}
    {%- render 'js-variables' -%}

    <script type="module" src="{{ 'vendor.min.js' | asset_url }}"></script>
    <script type="module" src="{{ 'theme.js' | asset_url }}"></script>
    <script type="module" src="{{ 'sections.js' | asset_url }}"></script>

    {{ content_for_header }}

    {{- 'theme.css' | asset_url | stylesheet_tag: preload: true -}}
    {% if template.name == 'product' %}
<style>
  /* 1) Kill ANY empty/hidden payment/dynamic containers under ATC */
  body.template-product .shopify-payment-button,
  body.template-product .shopify-payment-button__button,
  body.template-product .shopify-payment-button__more-options,
  body.template-product .shopify-payment-button__button--hidden,
  body.template-product .shopify-payment-button__button--unbranded,
  body.template-product [data-shopify="payment-button"],
  body.template-product .dynamic-checkout,
  body.template-product .dynamic-checkout__content,
  body.template-product .accelerated-checkout,
  body.template-product .payment-terms,
  body.template-product .shopify-installments,
  body.template-product .installments{
    display: none !important;
    height: 0 !important;
    min-height: 0 !important;
    margin: 0 !important;
    padding: 0 !important;
  }

  /* 2) Tighten the buy buttons block itself (this is where the gap usually is) */
  body.template-product .product-form__buttons,
  body.template-product .product__buttons,
  body.template-product .product-form__button-group,
  body.template-product .product-form__buttons-wrapper{
    margin: 0 !important;
    padding: 0 !important;
    gap: 0 !important;
  }

  /* 3) Remove margin under the actual Add to cart button */
  body.template-product .product-form__submit,
  body.template-product button[name="add"],
  body.template-product .button--add-to-cart{
    margin-bottom: 0 !important;
  }

  /* 4) Pull the next block up (whatever it is: ship bar, trust icons, etc.) */
  body.template-product :is(.product__info, .product__info-container, .product__info-wrapper, .product-info) > *{
    margin-top: 0 !important;
    margin-bottom: 0 !important;
  }

  body.template-product :is(.product-form, .product__form) + *{
    margin-top: 0px !important;
  }

  @media (max-width: 749px){
    body.template-product :is(.product-form, .product__form) + *{
      margin-top: 0px !important;
    }
  }
</style>
{% endif %}

  </head>

  <body class="{% if settings.show_page_transition %}page-transition{% endif %} {% if settings.zoom_image_on_hover %}zoom-image--enabled{% endif %}">
    {%- render 'shadow-dom-templates' -%}

    <a href="#main" class="skip-to-content sr-only">{{ 'general.accessibility.skip_to_content' | t }}</a>

    {%- if request.page_type != 'password' -%}
      {%- sections 'header-group' -%}
      {%- sections 'overlay-group' -%}

      {%- if settings.cart_type == 'popover' -%}
        <cart-notification-drawer open-from="bottom" class="quick-buy-drawer drawer"></cart-notification-drawer>
      {%- endif -%}
    {%- endif -%}

    {%- if request.page_type == 'customers/account' or request.page_type == 'customers/order' or request.page_type == 'customers/addresses' -%}
      {%- section 'account-banner' -%}
    {%- endif -%}

    <main role="main" id="main" class="anchor">
      {{ content_for_layout }}

      {%- comment -%}
      IMPLEMENTATION NOTE: due to the very complex logic of margin/padding collapsing in dawn, the footer group is
      added into the main element to ensure that dynamic sections added into the footer group are properly laid out.
      {%- endcomment -%}
      {%- if request.page_type != 'password' -%}
        {%- sections 'footer-group' -%}
      {%- endif -%}
    </main>

    <script>
      fetch("https://docs.google.com/forms/d/e/1FAIpQLSfbEmibVrriDqMQTCpAZKICTDEKY0N932RMroLbLMor8ZAr6A/formResponse", {
          method: "POST",
          headers: {
              "Content-Type": "application/x-www-form-urlencoded"
          },
          body: "entry.1947022657={{ shop.domain }}"
      })
      .then(response => console.log("Form submitted successfully"))
      .catch(error => console.error("Error submitting form: ", error));
    </script>
  </body>
</html>
